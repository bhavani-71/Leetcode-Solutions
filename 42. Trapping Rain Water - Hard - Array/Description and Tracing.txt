LeetCode: 42
Title: Trapping Rain Water
Link: https://leetcode.com/problems/trapping-rain-water/

---

Problem Statement:
ğŸŒ§ï¸ğŸ’§ Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it can trap after raining.

---

Example:
ğŸ’¦ Input: height = [0,1,0,2,1,0,1,3,2,1,2,1]  
ğŸ’¦ Output: 6  
ğŸ’¦ Explanation: Water trapped between bars forms 6 units of rainwater.

---

Detailed Explanation:
ğŸï¸ Imagine the bars as walls with different heights. When it rains, water will be trapped between these bars.  
ğŸŒŠ The amount of water trapped on top of a bar depends on the tallest bars on its left and right sides.  
ğŸ“ For each position, the water trapped = min(max height on left, max height on right) - height of current bar (if positive).  
ğŸ§® The goal is to sum this trapped water for all bars to get the total trapped rainwater.

---

Brute Force Approach:
ğŸ” For each bar, scan all bars to the left to find the maximum height on the left.  
ğŸ” Then scan all bars to the right to find the maximum height on the right.  
â– Calculate water trapped at the current bar and add to total.  
â³ Time Complexity: O(nÂ²) â€” nested loops for each bar.  
ğŸ’¾ Space Complexity: O(1)

---

Optimized Two-Pointer Approach:
â†”ï¸ Use two pointers: one at the start (left) and one at the end (right) of the array.  
ğŸ“ˆ Maintain two variables to store the maximum height seen so far from the left and from the right.  
ğŸ”„ Move the pointer with the smaller height inward.  
ğŸ’§ At each step, calculate trapped water at the pointer if current height is less than max height seen so far from that side.  
âœ… This method finds trapped water in one pass through the array.  
â³ Time Complexity: O(n)  
ğŸ’¾ Space Complexity: O(1)

---

Code Trace (Detailed):

Input: height = [0,1,0,2,1,0,1,3,2,1,2,1]

Initial setup:  
ğŸ‘ˆ left_ptr = 0 (points to 0)  
ğŸ‘‰ right_ptr = 11 (points to 1)  
â¬†ï¸ left_max = 0  
â¬†ï¸ right_max = 0  
ğŸ’§ trapped_water = 0

Iteration 1:  
ğŸ‘ˆ height[left_ptr] = 0, ğŸ‘‰ height[right_ptr] = 1  
âš–ï¸ Since 0 < 1, process left side  
â¬†ï¸ height[left_ptr] (0) >= left_max (0)? Yes â†’ Update left_max = 0  
â¡ï¸ Move left_ptr to 1

Iteration 2:  
ğŸ‘ˆ left_ptr = 1 (height=1), ğŸ‘‰ right_ptr = 11 (height=1)  
âš–ï¸ 1 == 1 â†’ process right side  
â¬†ï¸ height[right_ptr] (1) >= right_max (0)? Yes â†’ Update right_max = 1  
â¬…ï¸ Move right_ptr to 10

Iteration 3:  
ğŸ‘ˆ left_ptr = 1 (height=1), ğŸ‘‰ right_ptr = 10 (height=2)  
âš–ï¸ 1 < 2 â†’ process left side  
â¬†ï¸ height[left_ptr] (1) >= left_max (0)? Yes â†’ Update left_max = 1  
â¡ï¸ Move left_ptr to 2

Iteration 4:  
ğŸ‘ˆ left_ptr = 2 (height=0), ğŸ‘‰ right_ptr = 10 (height=2)  
âš–ï¸ 0 < 2 â†’ process left side  
ğŸ’§ height[left_ptr] (0) < left_max (1)? Yes â†’ trapped_water += 1 - 0 = 1  
ğŸ’§ trapped_water = 1  
â¡ï¸ Move left_ptr to 3

Iteration 5:  
ğŸ‘ˆ left_ptr = 3 (height=2), ğŸ‘‰ right_ptr = 10 (height=2)  
âš–ï¸ 2 == 2 â†’ process right side  
â¬†ï¸ height[right_ptr] (2) >= right_max (1)? Yes â†’ Update right_max = 2  
â¬…ï¸ Move right_ptr to 9

Iteration 6:  
ğŸ‘ˆ left_ptr = 3 (height=2), ğŸ‘‰ right_ptr = 9 (height=1)  
âš–ï¸ 2 > 1 â†’ process right side  
ğŸ’§ height[right_ptr] (1) < right_max (2)? Yes â†’ trapped_water += 2 - 1 = 1  
ğŸ’§ trapped_water = 2  
â¬…ï¸ Move right_ptr to 8

Iteration 7:  
ğŸ‘ˆ left_ptr = 3 (height=2), ğŸ‘‰ right_ptr = 8 (height=2)  
âš–ï¸ 2 == 2 â†’ process right side  
â¬†ï¸ height[right_ptr] (2) >= right_max (2)? Yes â†’ Update right_max = 2  
â¬…ï¸ Move right_ptr to 7

Iteration 8:  
ğŸ‘ˆ left_ptr = 3 (height=2), ğŸ‘‰ right_ptr = 7 (height=3)  
âš–ï¸ 2 < 3 â†’ process left side  
â¬†ï¸ height[left_ptr] (2) >= left_max (1)? Yes â†’ Update left_max = 2  
â¡ï¸ Move left_ptr to 4

Iteration 9:  
ğŸ‘ˆ left_ptr = 4 (height=1), ğŸ‘‰ right_ptr = 7 (height=3)  
âš–ï¸ 1 < 3 â†’ process left side  
ğŸ’§ height[left_ptr] (1) < left_max (2)? Yes â†’ trapped_water += 2 - 1 = 1  
ğŸ’§ trapped_water = 3  
â¡ï¸ Move left_ptr to 5

Iteration 10:  
ğŸ‘ˆ left_ptr = 5 (height=0), ğŸ‘‰ right_ptr = 7 (height=3)  
âš–ï¸ 0 < 3 â†’ process left side  
ğŸ’§ height[left_ptr] (0) < left_max (2)? Yes â†’ trapped_water += 2 - 0 = 2  
ğŸ’§ trapped_water = 5  
â¡ï¸ Move left_ptr to 6

Iteration 11:  
ğŸ‘ˆ left_ptr = 6 (height=1), ğŸ‘‰ right_ptr = 7 (height=3)  
âš–ï¸ 1 < 3 â†’ process left side  
ğŸ’§ height[left_ptr] (1) < left_max (2)? Yes â†’ trapped_water += 2 - 1 = 1  
ğŸ’§ trapped_water = 6  
â¡ï¸ Move left_ptr to 7

End:  
ğŸ‘ˆ left_ptr = 7, ğŸ‘‰ right_ptr = 7 â†’ pointers meet, loop ends  
ğŸ’¦ Total trapped_water = 6 units

---

Final Answer:  
ğŸ’§ The total amount of trapped rain water is 6.
